# RTX1200のポート開放の仕方
## 前置き
Q, RTX1200とは？  
A, 2008年に発売されたYAMAHAのVPNルーター　グラボじゃ無いし楽器でもない  
<img src="img/20230907/RTX1200.jpg" alt="rtx1200" width="80%">  

このルーター君　業務用っぽくポート開放の欄が無かったりする。ネットで適当に調べたら出てくるような事をやってもなかなか開放されない  
困ってるそんなあなたに多分ポート開放ができるようようにする記事です。  
<a href="https://twitter.com/keichankotaro1">この内容はkeichankotaroさんから教えてもらった情報になります。感謝</a>
結構古いルーターなので、ヤフオクとかメルカリで4000円ぐらいでいつも売ってる。私もそれぐらいの値段で入手した。  
自宅サーバーをやってる人の中でよく見かける

## 本題
### このブログは完全に理解した！状態で書いているので、まちがっている可能性があります。間違っていたらadmin@256server.com へメールをお願いします。
ポート開放をするには、3つステップが必要です。  
+ NATの設定
+ パケットフィルターの設定(PPPoE側)
+ パケットフィルターの設定(LAN1側)

まずはRTX1200にアクセスをしましょう。そうしないと何もできない　通常は <a href="192.168.100.1">192.168.100.1</a> に設定されているはず。パスワードとかは初期は空白だった気がする  
<img src="img/20230907/RTX1200-toppage.png" alt="rtx1200トップページ" width="350px">  

そうしたら、上の管理者向けトップページをクリック  
<img src="img/20230907/RTX1200-adminpage.png" alt="rtx1200管理者ページ" width="350px">  

なんかいろいろと書いてあって難しそうですよね　難しいですよ  
まず最初に左のバーから「NAT」をクリック  
<img src="img/20230907/RTX1200-NAT-mainpage.png" alt="rtx1200 NAT" width="350px">  

設定をクリック　そうすると、番号が1000のNATが一つだけあると思います。その設定を同じようにクリック  
<img src="img/20230907/RTX1200 NAT settingpng.png" alt="rtx1200 NAT設定" width="350px">  

最初は静的IPマスカレードというところは空っぽだと思います。そこに、内部のアドレス(サーバーのIPアドレス　192.168.100.xxx)とプロトコル　そして開けたいポート番号を設定してください  
今回は、192.168.100.12のポートを22番と80番（YAMAHAのルーターは80がwwwになります。）を開けます  
そしたら確認を押して設定してください　これだけでポートが解放されたと思いますが、これだけじゃちゃんと空かないようです  
次に左のバーから「パケットフィルター」をクリック  
<img src="img/20230907/RTX1200 packetfilter.png" alt="rtx1200 パケットフィルター" width="350px">  

そしたら画像のところの設定をクリック  
<img src="img/20230907/RTX1200 packetfilter setting.png" alt="rtx120p パケットフィルター設定" width="350px">  

なんか難しそうですよね　ですがさっきと同じです。　右の挿入のところを押してさっきと同じような情報を入れるだけです。どのように入れるかは画像を見てください。送信元情報は書かずに送信先情報だけ書くような感じです。  
これでパケットフィルター(PPPoE側)の設定が完了しました。  
次にLAN1の設定をします。もしLAN2からL2スイッチにつなげてサーバーに繋げているのならL2の設定になります。  
もう一度左のバーからパケットフィルターをクリック  
<img src="img/20230907/RTX1200-packetfilter-2.png" alt="rtx1200 パケットフィルター設定" width="350px">  

そうしたらさっき見たような画面が出るはずです。  
もう一度パケットフィルターの設定をしましょう。　同じことをやるだけなので画像は省略  
これでパケットフィルターの設定(LAN1側)が終わり、これでポートが解放されました。　最後にサーバー側でufwなどを使ってサーバー側のIPを解放しましょう。  
## 終わりに
RTX1200　安いし入手性もいいので買ってみたけどポートが解放が出来ないっていう問題は解消されたと思います。  
もし解消しなかった場合はこの記事を見なかったことにするかネットワーク系に強い人に聞くかChatGPTにでも聞いてください　訂正箇所があれば admin@256server.com にメールをしてください  
最後までスクロールありがとうございます。